% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build_formulas.R
\name{build_formulas}
\alias{build_formulas}
\title{Build Formulas for a List of Models}
\usage{
build_formulas(
  model_list,
  covary = TRUE,
  intercept = TRUE,
  model_env = NULL,
  ...
)
}
\arguments{
\item{model_list}{A named list where each element is itself a list describing
a model. Each element should include:
\itemize{
\item \code{dependent_variable} Character scalar; the outcome variable name.
\item \code{fixed_effects} Character vector; fixed-effect terms (may include interactions).
\item \code{random_effects} Optional character vector; random-effect terms (may include "1").
\item \code{grouping_variable} Optional character scalar; grouping variable for random effects.
\item \code{data} Character scalar; the name of a data frame object (looked up via \code{get()}).
\item \code{name} Optional character scalar; used only for clearer warning messages.
}}

\item{covary}{Logical; if \code{TRUE}, random slopes/intercepts are modeled as correlated
(uses \code{|}); if \code{FALSE}, uncorrelated (uses \code{||}). Passed to \code{build_random_term()}.}

\item{intercept}{Logical; if \code{TRUE}, a random intercept is added if not explicitly included
in \code{random_effects}. Passed to \code{build_random_term()}.}

\item{model_env}{Optional environment in which the resulting \code{formula} objects will be bound.
If \code{NULL}, a new environment is created with \code{globalenv()} as parent (a warning is issued).}

\item{...}{Reserved for future expansion; currently unused.}
}
\value{
The input \code{model_list}, with a \code{$formula} element added to each
model successfully processed. Entries that were skipped remain unchanged.
}
\description{
Uses \code{\link{build_formula}} (and helpers) to construct model formulas
for each entry in a supplied \code{model_list}. For each model, the function
verifies required inputs, optionally checks variable existence in the
associated dataset, and attaches a \code{$formula} element to that model's
list entry. Models with insufficient information are skipped with a warning.
}
\details{
For each model entry, the function:
\enumerate{
\item Retrieves the data frame via \code{get(model_list[[i]]$data)}.
\item Calls \code{\link{build_formula}} with the provided components.
\item Attaches the resulting \code{formula} as \code{model_list[[i]]$formula}.
}
Models are skipped (with warnings) if:
\itemize{
\item \code{data} is \code{NULL} or not found,
\item \code{random_effects} is provided but \code{grouping_variable} is missing,
\item \code{grouping_variable} is provided but \code{random_effects} is missing.
}
}
\examples{
\dontrun{
ml <- list(
  m1 = list(
    name = "Model 1",
    dependent_variable = "y",
    fixed_effects = c("x1", "x2", "x1:x2"),
    random_effects = c("1", "x1"),
    grouping_variable = "id",
    data = "df"   # name of a data.frame in the environment
  ),
  m2 = list(
    name = "Model 2 (fixed only)",
    dependent_variable = "y",
    fixed_effects = c("x1", "x2"),
    data = "df"
  )
)

# Suppose df exists in the environment
out <- build_formulas(ml, covary = TRUE, intercept = TRUE)
out$m1$formula
out$m2$formula
}

}
\seealso{
\code{\link{build_formula}}, \code{\link{build_random_term}}, \code{\link{build_fixed_term}}
}
