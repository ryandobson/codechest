% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fixed_effects_removal.R
\name{run_fixed_effect_drops}
\alias{run_fixed_effect_drops}
\title{Run fixed-effect interaction drops across a model list}
\usage{
run_fixed_effect_drops(
  model_list,
  remove,
  new_random_effect,
  alpha,
  model_env = NULL,
  model_path = c("mc"),
  fes_path = "fixed_effects",
  data_path = "data",
  name_path = "name",
  output_path = NULL
)
}
\arguments{
\item{model_list}{A list where each element represents a model specification
and results. Each element is expected to contain at least:
\itemize{
\item \code{$mc}: a history produced by \code{mlm_comparison()} (used by
\code{final_model_mlm_comparison()} to retrieve the starting model).
\item a fixed-effects vector available at \code{fes_path} (defaults to
\code{"fixed_effects"}).
\item a data frame name available at \code{data_path} (defaults to \code{"data"}).
}}

\item{remove}{Character scalar. Variable whose interaction terms should
be considered for removal (passed to \code{fixed_effect_drops()}).
Use \code{"all_interactions"} to consider all interactions.}

\item{new_random_effect}{Character scalar. Random-slope variable to add
during refits (forwarded to \code{fixed_effect_drops()}).}

\item{alpha}{Numeric. Interactions with p-values \emph{greater than} \code{alpha}
are considered non-significant and eligible for dropping.}

\item{model_env}{Optional environment to bind generated formulas. If \code{NULL},
a new environment is created with \code{globalenv()} as parent (a warning is issued).}

\item{model_path}{Character vector of names describing where to find the model
comparison history within each list element. Default \code{c("mc")}.
(Reserved for future use; the current implementation uses \code{item$mc} directly.)}

\item{fes_path}{Character vector of names describing where to find the
fixed-effects character vector within each list element. Default \code{"fixed_effects"}.}

\item{data_path}{Character vector of names describing where to find the \emph{name}
(character string) of the data frame within each list element. Default \code{"data"}.
The data frame is retrieved via \code{get()} in the parent frame.}

\item{name_path}{Character vector of names describing where to find a label
for the entry. Default \code{"name"}. (Currently not used; reserved for logging prefixes.)}

\item{output_path}{Optional character string. Name of the list element
under which to store the fixed-effect drop history for each model.
Defaults to \code{"fed<remove>"} if \code{NULL}.}
}
\value{
The input \code{model_list} with an additional element
\code{$fed_x1} attached to each processed entry, containing the
step-by-step history (class \code{"fixed_effect_drop_history"}).
}
\description{
Iterates over \code{model_list}, extracts the starting model from each entry's
mixed-model comparison history via \code{\link{final_model_mlm_comparison}},
and applies \code{\link{fixed_effect_drops}} to remove non-significant
interaction terms from the fixed-effects set. The resulting stepwise history
is stored back on each entry.
}
\details{
For each element \code{i} of \code{model_list}:
\enumerate{
\item The starting model is obtained with \code{final_model_mlm_comparison(item$mc)}.
\item \code{fixed_effects} and the \code{data} object name are pulled using a
simple nested accessor (via \code{fes_path} and \code{data_path}), then
the data frame is resolved by \code{get()}.
\item \code{\link{fixed_effect_drops}} is called with these inputs.
\item The returned history is saved as \code{model_list[[i]]fedx1}.
}
}
\examples{
\dontrun{
# Assuming each entry has $mc (from mlm_comparison), $fixed_effects, and $data:
out <- run_fixed_effect_drops(
  model_list       = models_expanded,
  remove      = "x1",
  new_random_effect= "x1",
  alpha            = 0.10
)
# Inspect the fixed-effects drop history for the first entry
out[[1]]$fedx1
}

}
\seealso{
\code{\link{log_fixed_effect_drop}}, \code{\link{fed_set_class}},
\code{\link{drop_nonsig_int_effects}}, \code{\link{build_fixed_term}},
\code{\link{build_formula}}, \code{\link{check_random_effects}},
\code{\link{get_random_effects}}, \code{\link{add_random_term}}
}
